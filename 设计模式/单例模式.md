全局只能有一个对象

```cpp
class Log
{
public:
    Log(const Log &log)=delete;
    Log& operator=(const Log& log)=delete;
    
    Log( Log &&log)=delete;  
    Log& operator=( Log&& log)=delete;
    
    static Log& get_instance()
    {
        call_once(once,init);
        return *log;
    }
    void print_err(const string& msg)
    {
        cout<<__TIME__<<" "<<msg<<endl;
    }
private:
    Log(){}
    inline static  Log *log=nullptr;
    inline static once_flag once;
    static void init()
    {
        if(log==nullptr)
            log=new Log();
    }
};
```

禁用拷贝构造和拷贝复制构造
把默认构造函数权限改为private
利用类的静态成员函数返回唯一类对象

如果实在是想获取对象，使用下面方法
```cpp
s3::Log && log=move(s3::Log::get_instance());
```
```cpp
int main()  
{  
    s3::Log && log=move(s3::Log::get_instance());  
    log.print_err("hello");  
    log.a=20;  
    s3::Log::get_instance().print_err("error");  
    cout<<&log<<","<<&s3::Log::get_instance()<<endl;  
    int a=10;  
    return 0;  
}
```
![image.png](https://yaaame-1317851743.cos.ap-beijing.myqcloud.com/20240504131039.png)
