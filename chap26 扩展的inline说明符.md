

inline 说明符，在函数的 声明说明符序列 中使用时，将函数声明为一个 内联函数。

inline 说明符的目的是提示编译器做优化，譬如函数内联，这通常要求编译方能见到函数的定义。编译器能（并且经常）就优化的目的忽略 inline 说明符的存在与否。

若编译器进行函数内联，则它会以函数体取代所有对它的调用，以避免函数调用的开销（将数据置于栈上和取得结果），这可能会生成更大的可执行文件，因为函数可能会被重复多次。结果同仿函数宏，只是用于该函数的标识符和宏指代可见于定义点的定义，而不指代调用点的定义。

不管是否进行内联，内联函数都保证下列语义：

任何拥有内部链接的函数都可以声明成 static inline ，没有其他限制。

一个非 static 的内联函数不能定义一个非 const 的函数局部 static 对象，并且不能使用文件作用域的 static 对象。 

```cpp
static int x;
 
inline void f(void)
{
    static int n = 1; // 错误：非 const 的 static 对象在非 static 的 inline 函数中
    int k = x; // 错误：非 static 的 inline 函数访问 static 变量
}
```




在C++17标准之前，定义类的非常量静态成员变量是一件让人头痛 的事情，因为变量的声明和定义必须分开进行


对于一些字面量类型，比如整型、浮点类型等，这种情况有所缓 解，至少对于它们而言常量静态成员变量是可以一边声明一边定义的

![image.png](https://yaaame-1317851743.cos.ap-beijing.myqcloud.com/20240502090219.png)


C++17标准中增强了inline说明符的能 力，它允许我们内联定义静态变量