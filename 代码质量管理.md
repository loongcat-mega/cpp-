
# 设计模式和原则

以“高内聚，低耦合”为目的的设计原则：
- 单一职责原则：模块或类的职责单一
- 基于接口而非实现编程：在有依赖关系的两个模块或类之间，一个模块或类的改动，不会影响另一个模块或类，将强依赖关系解耦为弱依赖关系
- 依赖注入LOD：不该有直接依赖关系的类之间，不要有依赖；有依赖关系的类之间，尽量只依赖必要的接口（也就是定义中的“有限知识”）。


# 编程规范

公司CR占比超过一半的TOP6规则：
1. 源代码不能有重复代码
2. 不能使用魔数
3. 代码不能被注释
4. 类与类之间不能耦合
5. MyCube值
6. 函数不能太复杂


## BadSmell

### 对象函数

| codeSemll | measures                                      |
| --------- | --------------------------------------------- |
| 过长函数      | 提炼函数                                          |
| 过长参数列表    | 1.引入参数对象<br>2.移除标记参数                          |
| 重复的switch | 1.使用策略模式，策略类+策略路由<br>2.抽取方法，先判断返回逻辑，把较重逻辑放在后面 |

```go
if A{
return value
}
if B{
return value
}
return nil
```

可以把逻辑改成
```go
if !A&&!B{
return nil
}
return value
```


### 对象数据

| codeSmell | desc        |
| --------- | ----------- |
| 神秘命名      | 命名不规范，魔数    |
| 全局数据      | 对一个全局数据同时读写 |
| 可变数据      | 收回public权限  |
| 数据泥团      | 不同的类有相同的值域  |
| 临时字段      | 活动范围要限制     |
| 纯数据类      | 只有数据，没有方法   |

 